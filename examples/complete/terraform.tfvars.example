# ================================================================
# Immich Family Photo Server - Example Configuration
# ================================================================
# Copy this file to terraform.tfvars and customize with your values
# 
# Estimated cost: €8-12/month for unlimited family photos

# ================================================================
# REQUIRED: Hetzner Cloud Configuration
# ================================================================

# Get from: https://console.hetzner.cloud/ -> Project -> Security -> API Tokens
hcloud_token = "YOUR_HETZNER_CLOUD_TOKEN_HERE"

# Your SSH public key(s) for server access
# Generate with: ssh-keygen -t ed25519
# Then copy from: ~/.ssh/id_ed25519.pub
ssh_public_keys = [
  "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAI... your-key-here"
]

# ================================================================
# REQUIRED: S3-Compatible Storage Configuration
# ================================================================
# 
# RECOMMENDED: Backblaze B2 for cost-effectiveness (€0.005/GB/month)
# 1. Create account at https://www.backblaze.com/
# 2. Create a PRIVATE bucket for your photos
# 3. Generate Application Key with read/write access to your bucket
#
# ALTERNATIVE: Any S3-compatible storage (AWS S3, MinIO, etc.)

s3_access_key_id     = "YOUR_S3_ACCESS_KEY_ID_HERE"
s3_secret_access_key = "YOUR_S3_SECRET_ACCESS_KEY_HERE"
s3_bucket_name       = "your-family-photos-2024"

# ================================================================
# OPTIONAL: Customization
# ================================================================

# Project name (used for resource naming)
project_name = "immich-family"

# Server location (nbg1=Nuremberg, fsn1=Falkenstein, hel1=Helsinki)
server_location = "nbg1"

# Domain name (optional - enables HTTPS with Let's Encrypt)
# Leave empty for IP-only access
domain_name = ""

# Admin email for Immich and SSL certificates
admin_email = "admin@example.com"

# SSH access restriction (SECURITY: Change from 0.0.0.0/0!)
# Find your IP with: curl ifconfig.me
allowed_ssh_ips = ["0.0.0.0/0"]

# S3 region (for Backblaze B2: us-west-000 is cheapest)
s3_region = "us-west-000"

# S3 endpoint (leave empty for Backblaze B2, or specify custom endpoint)
# Examples:
#   Backblaze B2: "" (auto-detected)
#   AWS S3: "" (auto-detected) 
#   MinIO: "https://minio.example.com"
#   Other: "https://s3.custom-provider.com"
s3_endpoint = ""

# ================================================================
# OPTIONAL: Server and Firewall Configuration
# ================================================================

# Server type (cx22 recommended for families - 2 vCPU, 8GB RAM)
# Options: cx11, cx21, cx22, cx31, cx32, cx41, cx42, cx51, cx52
# Performance tiers: cpx11, cpx21, cpx31, cpx41, cpx51
server_type = "cx22"

# Firewall access control (SECURITY: Restrict these IPs!)
# HTTP access (port 80)
allowed_http_ips = ["0.0.0.0/0", "::/0"]

# HTTPS access (port 443) 
allowed_https_ips = ["0.0.0.0/0", "::/0"]

# Direct Immich access (port 2283) - consider restricting to your network
allowed_immich_ips = ["0.0.0.0/0", "::/0"]

# ================================================================
# OPTIONAL: Resource Labels
# ================================================================

# Common labels applied to all resources for organization
resource_labels = {
  environment = "production"
  managed_by  = "terraform"
  component   = "immich"
  family      = "doe-family"
  backup      = "daily"
}